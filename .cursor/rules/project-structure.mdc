---
description: Comprehensive guide to the project's directory structure and important files
globs: "**/*"
alwaysApply: true
---

# Project Structure Guide

This is a **monorepo** project called `project-theta` that contains both frontend and backend applications, managed with Bun as the package manager.

## ðŸ—ï¸ Root Structure

```
project-theta/
â”œâ”€â”€ .cursor/rules/           # Cursor AI rules and configurations
â”œâ”€â”€ packages/               # Monorepo packages (frontend & backend)
â”œâ”€â”€ package.json            # Root package.json with workspace config
â”œâ”€â”€ bun.lock               # Bun lockfile for dependencies
â”œâ”€â”€ tsconfig.json          # Root TypeScript configuration
â””â”€â”€ README.md              # Project documentation
```

## ðŸ“¦ Packages Structure

### Frontend Package (`packages/frontend/`)

**React + TypeScript + Vite application** with a sophisticated chat interface:

```
packages/frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.tsx                    # Main React application component
â”‚   â”œâ”€â”€ main.tsx                   # Vite entry point
â”‚   â”œâ”€â”€ index.css                  # Global styles
â”‚   â”œâ”€â”€ components/                # React components organized by type
â”‚   â”‚   â”œâ”€â”€ ui/                    # Reusable UI components (shadcn/ui style)
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx         # Button component
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx           # Card component
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx         # Dialog/modal component
â”‚   â”‚   â”‚   â”œâ”€â”€ form-factory.tsx   # Dynamic form generator
â”‚   â”‚   â”‚   â””â”€â”€ ...                # 20+ UI components
â”‚   â”‚   â”œâ”€â”€ block/                 # Feature-specific block components
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/              # Chat-related components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ assistant-message.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ user-message.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model-selector.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tool-block.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ desktop-nav.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ settings/          # Settings panel components
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ providers.tsx  # AI provider configuration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tools.tsx      # Tool configuration
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model-config.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ system-prompt.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ appearance.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ session/           # Session management
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ session-item.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialogs/           # Modal dialogs
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ save-session.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ delete-session.tsx
â”‚   â”‚   â”‚   â””â”€â”€ menu.tsx           # Main navigation menu
â”‚   â”‚   â””â”€â”€ layout/                # Layout components
â”‚   â”‚       â””â”€â”€ settings.tsx       # Settings layout
â”‚   â”œâ”€â”€ page/                      # Page-level components
â”‚   â”‚   â”œâ”€â”€ Chat.tsx               # Main chat page (10KB - core chat logic)
â”‚   â”‚   â”œâ”€â”€ Sessions.tsx           # Sessions management page
â”‚   â”‚   â”œâ”€â”€ Setting.tsx            # Settings page
â”‚   â”‚   â””â”€â”€ context/               # React context providers
â”‚   â”‚       â””â”€â”€ Chat.tsx           # Chat context provider
â”‚   â”œâ”€â”€ lib/                       # Utility libraries and hooks
â”‚   â”‚   â”œâ”€â”€ utils.ts               # General utility functions
â”‚   â”‚   â”œâ”€â”€ const.ts               # Application constants
â”‚   â”‚   â”œâ”€â”€ tools.ts               # Tool definitions and management
â”‚   â”‚   â”œâ”€â”€ storage.ts             # LocalStorage abstraction
â”‚   â”‚   â”œâ”€â”€ storage-hooks.ts       # React hooks for storage
â”‚   â”‚   â”œâ”€â”€ proxy.ts               # API proxy utilities
â”‚   â”‚   â””â”€â”€ use-auto-scroll.ts     # Auto-scroll hook for chat
â”‚   â”œâ”€â”€ sdk/                       # SDK for AI providers and tools
â”‚   â”‚   â”œâ”€â”€ index.ts               # Main SDK exports
â”‚   â”‚   â”œâ”€â”€ shared.ts              # Shared SDK utilities (7KB)
â”‚   â”‚   â”œâ”€â”€ providers/             # AI provider implementations
â”‚   â”‚   â”‚   â”œâ”€â”€ anthropic.ts       # Anthropic Claude integration (18KB)
â”‚   â”‚   â”‚   â””â”€â”€ anthropic.types.ts # TypeScript types for Anthropic
â”‚   â”‚   â””â”€â”€ tools/                 # Tool system implementation
â”‚   â”‚       â”œâ”€â”€ index.ts           # Tool definitions (8.9KB)
â”‚   â”‚       â”œâ”€â”€ errors.ts          # Tool error handling
â”‚   â”‚       â””â”€â”€ providers/         # Tool provider implementations
â”‚   â”‚           â”œâ”€â”€ openweather.ts # OpenWeather API tool (17KB)
â”‚   â”‚           â””â”€â”€ openweather.types.ts
â”‚   â””â”€â”€ markdown-plugin/           # Custom markdown processing
â”‚       â””â”€â”€ rehype-highlight.ts    # Syntax highlighting plugin
â”œâ”€â”€ public/                        # Static assets (currently empty)
â”œâ”€â”€ icon-pack/                     # SVG icons
â”‚   â””â”€â”€ ai-provider/               # AI provider logos
â”‚       â””â”€â”€ anthropic.svg          # Anthropic logo
â”œâ”€â”€ components.json                # shadcn/ui configuration
â”œâ”€â”€ package.json                   # Frontend dependencies
â”œâ”€â”€ vite.config.ts                 # Vite build configuration
â””â”€â”€ tsconfig.*.json               # TypeScript configurations
```

### Backend Package (`packages/backend/`)

**Node.js + TypeScript backend application:**

```
packages/backend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts                   # Main backend entry point (1.8KB)
â”œâ”€â”€ package.json                   # Backend dependencies
â”œâ”€â”€ tsconfig.json                  # Backend TypeScript config
â””â”€â”€ README.md                      # Backend documentation
```

## ðŸŽ¯ Key Files and Their Purposes

### Core Application Files

- **`packages/frontend/src/page/Chat.tsx`** (10KB) - Main chat interface logic
- **`packages/frontend/src/sdk/providers/anthropic.ts`** (18KB) - Anthropic Claude integration
- **`packages/frontend/src/sdk/tools/index.ts`** (8.9KB) - Tool system implementation
- **`packages/frontend/src/components/ui/form-factory.tsx`** (9.8KB) - Dynamic form generation

### Configuration Files

- **`package.json`** (root) - Workspace configuration for monorepo
- **`vite.config.ts`** - Frontend build configuration
- **`components.json`** - shadcn/ui component configuration
- **`tsconfig.json`** - TypeScript configuration inheritance

### Tool and Provider System

- **`packages/frontend/src/sdk/tools/providers/openweather.ts`** (17KB) - Weather API integration
- **`packages/frontend/src/components/block/settings/providers.tsx`** (9.4KB) - Provider configuration UI

## ðŸ§© Architecture Patterns

### Component Organization

1. **UI Components** (`components/ui/`) - Reusable, atomic components following shadcn/ui patterns
2. **Block Components** (`components/block/`) - Feature-specific components organized by domain
3. **Page Components** (`page/`) - Top-level page containers
4. **Layout Components** (`components/layout/`) - Layout and structure components

### State Management

- React Context for global state (`page/context/`)
- Local storage abstraction (`lib/storage.ts`, `lib/storage-hooks.ts`)
- Custom hooks for specific functionality (`lib/use-auto-scroll.ts`)

### SDK Architecture

- Provider-agnostic AI interface (`sdk/index.ts`, `sdk/shared.ts`)
- Pluggable AI providers (`sdk/providers/`)
- Extensible tool system (`sdk/tools/`)

## ðŸ“‹ Development Guidelines

### File Naming Conventions

- Use **kebab-case** for directories
- Use **PascalCase** for React components (`Component.tsx`)
- Use **camelCase** for utilities and hooks (`utils.ts`, `useHook.ts`)
- Use **lowercase** for configuration files (`package.json`, `vite.config.ts`)

### Directory Placement Rules

- Place reusable UI components in `components/ui/`
- Place feature-specific components in `components/block/{feature}/`
- Place utilities and helpers in `lib/`
- Place provider integrations in `sdk/providers/`
- Place tool implementations in `sdk/tools/providers/`

### Import Patterns

- Use relative imports within the same feature directory
- Use absolute imports from `src/` for cross-feature dependencies
- Group imports: external libraries, internal utilities, components

### Component Size Guidelines

- Keep components under 200 lines when possible
- Extract large components into smaller, focused components
- Large files (>5KB) should be well-documented and have clear responsibilities

## ðŸ”§ Build Tools and Package Management

- **Package Manager**: Bun (preferred over npm/yarn/pnpm)
- **Frontend Build**: Vite + TypeScript + React
- **Backend Runtime**: Node.js + TypeScript
- **Monorepo**: Workspace-based with root package.json
- **UI Framework**: shadcn/ui components with Tailwind CSS
